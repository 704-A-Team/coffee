<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.oracle.oBootTodoApi01.ProductMapper">
	
	<select id="productTotal" resultType="int">
		SELECT COUNT(*) FROM tbl_product
	</select>
	
	<select id="tkProductListAll" parameterType="ProductDTO" resultType="ProductDTO">
		<![CDATA[
		SELECT * FROM (
        	SELECT rownum rn, a.* FROM (
	            SELECT product.*, product_image.file_name simage
	            from ( select *
	                   from tbl_product
	                   where del_flag = 0
	                   ) product ,
	                 ( select *
	                   from product_image_list
	                   where ord = 0
	                 ) product_image
	                 where product.pno = product_image.product_pno(+)
	                 order by pno
	            )a
       		)
        WHERE rn >= #{start}
        AND   rn <= #{end}
	    ]]>
	</select>

</mapper>